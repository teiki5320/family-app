/* =========================================================
   Family App -- UI kit sombre soigné
   - grille fluide
   - addbar collante
   - cartes propres (.card-header / .card-actions)
   - composants réutilisables (boutons, badges, chips)
   ========================================================= */

/* ---------- Thème ---------- */
:root{
  --bg:#0b0b10;
  --surface:#10121a;
  --card:#141723;
  --text:#e8eaed;
  --muted:#9aa0a6;
  --border:#22263a;

  --accent:#55c2ff;
  --accent-2:#38e1b9;
  --danger:#ff6b6b;
  --ok:#9cff8a;

  --shadow: 0 8px 28px rgba(0,0,0,.45);
  --radius:12px;
  --radius-lg:14px;
  --gap:12px;
}

*{ box-sizing:border-box; }
html,body{ height:100%; margin:0; }
body{
  font-family: system-ui,-apple-system,Segoe UI,Roboto,Inter,Arial,sans-serif;
  color:var(--text); background: radial-gradient(1200px 800px at 10% -10%, #0f1320 0%, var(--bg) 40%) fixed;
  -webkit-font-smoothing:antialiased; -moz-osx-font-smoothing:grayscale;
}

/* ---------- Header + Nav ---------- */
.app-header{
  position: sticky; top: 0; z-index: 50;
  display:flex; align-items:center; gap:10px;
  padding:12px 16px;
  background: linear-gradient(180deg, rgba(12,14,20,.92), rgba(12,14,20,.82));
  border-bottom:1px solid var(--border);
  backdrop-filter: blur(10px) saturate(120%);
}
.app-header h1{ margin:0; font-size:16px; font-weight:700; letter-spacing:.2px; opacity:.95; }
.home-btn{
  background:transparent; border:1px solid var(--border);
  border-radius:10px; color:var(--text); padding:6px 10px; cursor:pointer;
}
.header-actions{ margin-left:auto; display:flex; gap:8px; flex-wrap:wrap; }
.header-actions .btn{
  padding:8px 10px; font-size:13px; border-radius:10px; border:1px solid var(--border);
  background: #121524; text-decoration:none; color:var(--text);
}
.header-actions .btn:hover{ border-color:#2b3050; background:#161a2c; }

/* ---------- Layout ---------- */
main{ max-width:1020px; margin:0 auto; padding:16px; }
section > h2{ margin:0 0 10px; font-size:18px; letter-spacing:.2px; }

/* ---------- Grilles ---------- */
.grid2{ display:grid; gap:12px; grid-template-columns: repeat(auto-fit, minmax(220px,1fr)); }
.row{ display:flex; gap:10px; align-items:center; }
.row-end{ justify-content:flex-end; }
.spacer{ flex:1; }

/* ---------- Formes ---------- */
input, select, textarea, button{
  background:#0f1220; color:var(--text);
  border:1px solid var(--border); border-radius:10px;
  padding:10px 12px; font-size:14px; outline:none;
}
input::placeholder, textarea::placeholder{ color:#7e8597; }
textarea{ width:100%; min-height:120px; resize:vertical; }
button{ cursor:pointer; }

.btn{
  background:#12172a; border:1px solid var(--border);
  padding:10px 12px; border-radius:10px; color:var(--text);
}
.btn:hover{ border-color:#2b3050; background:#161d33; }
.btn-primary{ background: linear-gradient(180deg, #1e6bd1, #174fa0); border-color:#1a4f98; }
.btn-primary:hover{ filter:brightness(1.06); }
.btn-danger{ background:#2a1619; border-color:#3a1d22; color:#ff9aa0; }
.btn-danger:hover{ background:#361a1f; }
.ghost{ background:transparent; border:1px dashed var(--border); color:var(--muted); }
.badge{
  background:#0e1526; border:1px solid #243052; color:#c9e2ff;
  padding:6px 10px; font-size:12px; border-radius:999px;
}
.chip{
  display:inline-flex; gap:8px; align-items:center;
  padding:6px 10px; border:1px solid var(--border); border-radius:999px;
  color:var(--muted); font-size:12px; background:#101526;
}

/* ---------- Addbar (collante) ---------- */
.addbar{
  position: sticky; top: 64px; z-index: 40;
  background: linear-gradient(180deg, rgba(18,22,36,.96), rgba(18,22,36,.86));
  border:1px solid var(--border);
  border-radius: var(--radius-lg);
  padding:12px;
  box-shadow: var(--shadow);
  margin: 0 0 16px;
}

/* ---------- Cartes ---------- */
.cards{ display:grid; gap:14px; grid-template-columns: repeat(auto-fill, minmax(280px, 1fr)); }
.card{
  background: linear-gradient(180deg, rgba(22,26,40,1), rgba(18,22,36,1));
  border:1px solid var(--border);
  border-radius: var(--radius);
  padding:12px; box-shadow: 0 1px 0 rgba(255,255,255,.02) inset;
}
.card-header{
  display:flex; align-items:flex-start; gap:10px; margin-bottom:8px;
}
.card-title-wrap{ display:flex; flex-direction:column; gap:4px; }
.card-title{ margin:0; font-size:15px; font-weight:700; line-height:1.2; }
.card-meta{ color:var(--muted); font-size:12px; }
.card-actions{ margin-left:auto; display:flex; flex-wrap:wrap; gap:8px; }

/* ---------- Details / Box ---------- */
.box{
  background:#12162a; border:1px solid #1e2540; border-radius:12px; padding:10px;
}
.box > summary{
  cursor:pointer; list-style:none; user-select:none; font-weight:600;
}
.box > summary::-webkit-details-marker{ display:none; }
.box > summary::after{
  content:'▾'; margin-left:8px; opacity:.6; transition:.2s; font-size:12px;
}
details[open] > summary::after{ transform:rotate(180deg); }
.section-body{ margin-top:8px; }

/* ---------- Listes ---------- */
.list{ list-style:none; padding:0; margin:12px 0; }
.item{
  background:#12162a; border:1px solid #1e2540; border-radius:12px;
  padding:10px 12px; display:flex; gap:10px; align-items:center; margin-bottom:8px;
}
.item .who{ color:var(--muted); font-size:12px; }

/* ---------- Chat ---------- */
.chat-messages{
  border:1px solid var(--border); border-radius:12px; background:#101425;
  padding:10px; height:320px; overflow:auto; margin:10px 0;
}
.msg{ display:flex; margin:6px 0; }
.msg .bubble{
  background:#0f1426; border:1px solid #1f2742; border-radius:12px; padding:8px 10px; max-width:80%;
}
.msg.me{ justify-content:flex-end; }
.msg.me .bubble{ background:#0f1d2b; border-color:#24364b; }
.meta{ color:var(--muted); font-size:12px; margin-top:4px; }

/* ---------- Calendrier ---------- */
.cal-grid{ display:grid; grid-template-columns: repeat(7, 1fr); gap:6px; margin-top:10px; }
.day{
  background:#101425; border:1px solid var(--border); border-radius:10px; padding:8px; min-height:70px; position:relative;
}
.day .num{ color:#aab2c8; font-size:12px; }
.day.today{ border-color:#2a3a6a; }
.day.selected{ outline:2px solid var(--accent); }
.cal-month{ font-weight:700; }
.cal-dot{
  width:6px; height:6px; border-radius:50%; background:var(--accent); display:inline-block; margin-right:2px;
}

/* ---------- Documents ---------- */
.folder-grid{ display:grid; gap:12px; grid-template-columns: repeat(auto-fill, minmax(180px, 1fr)); }
.file-grid{ display:grid; gap:12px; grid-template-columns: repeat(auto-fill, minmax(170px, 1fr)); margin-top:10px; }
.file-card{
  background:#12162a; border:1px solid #1e2540; border-radius:12px; padding:8px; display:flex; flex-direction:column; gap:8px;
}
.file-card .thumb{
  width:100%; aspect-ratio: 4/3; object-fit:cover; border-radius:10px; background:#0f1118; border:1px solid var(--border);
}
.file-card .name{ font-weight:600; font-size:14px; white-space:nowrap; overflow:hidden; text-overflow:ellipsis; }
.file-card .meta{ color:var(--muted); font-size:12px; }
.file-actions{ display:flex; gap:8px; }

/* ---------- Utilitaires ---------- */
.muted{ color:var(--muted); }
.hide-sm{ display:none; }
@media (min-width:700px){ .hide-sm{ display:initial; } }

/* ---------- Petites animations ---------- */
@keyframes fade{ from{opacity:.6; transform:translateY(2px);} to{opacity:1; transform:none;} }
.fade-in{ animation:fade .15s ease-out; }

/* ---------- Focus & States ---------- */
:focus-visible{ outline:2px solid #2c64ff; outline-offset:2px; border-radius:10px; }
button:disabled, input:disabled, select:disabled{ opacity:.6; cursor:not-allowed; }

/* ---------- Petits ajustements d’espacement ---------- */
section > .row:first-of-type{ margin-bottom:8px; }
.card + .card{ margin-top:0; } /* on utilise .cards pour l’espace */