<!doctype html>
<html lang="fr">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover">
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
  <title>Famille Â· App</title>
  <link rel="stylesheet" href="style.css">
  
  <link rel="manifest" href="/manifest.json">
  <meta name="theme-color" content="#0a0a0d">
  <link rel="apple-touch-icon" href="/icons/icon-192.png">
</head>
<body>
<header class="app-header">
  <h1>ğŸ“’ Famille</h1>
</header>

<main>
  <!-- Accueil / Dashboard -->
  <section id="home" class="panel active" role="tabpanel">
    <div class="dashboard">
      <div class="hero">
        <div class="hero-top">
          <div class="chip">INFO</div>
          <button class="hero-gear" title="ParamÃ¨tres (Ã  venir)">âš™ï¸</button>
        </div>
        <h3>Bienvenue, famille ğŸ‘‹</h3>
        <p class="hero-text">AccÃ¨s rapide Ã  vos listes, agenda, budgets, documents, messagesâ€¦</p>
        <div class="hero-dots"><span class="dot active"></span><span class="dot"></span><span class="dot"></span><span class="dot"></span></div>
      </div>

      <div class="tiles">

        <!-- Tuile Accueil -->
        <button class="tile" data-tab="home">
          <div class="icon">ğŸ </div>
          <div class="title">Accueil</div>
          <div class="subtitle">Vue dâ€™ensemble</div>
        </button>

        <button class="tile" data-tab="tasks">
          <div class="icon">ğŸ“</div>
          <div class="title">Listes</div>
          <div class="subtitle"><span id="dashTasksCount">0</span> Ã©lÃ©ments</div>
        </button>

        <button class="tile" data-tab="calendar">
          <div class="icon">ğŸ“…</div>
          <div class="title">Calendrier</div>
          <div class="subtitle" id="dashNextEvent">Pas dâ€™Ã©vÃ¨nement</div>
        </button>

        <button class="tile" data-tab="budget">
          <div class="icon">ğŸ·</div>
          <div class="title">Budget</div>
          <div class="subtitle">Solde : <span id="dashBalance">0,00 â‚¬</span></div>
        </button>

        <button class="tile" data-tab="weather">
          <div class="icon">ğŸŒ¤ï¸</div>
          <div class="title">MÃ©tÃ©o</div>
          <div class="subtitle" id="wxTile">Chargementâ€¦</div>
        </button>

        <button class="tile" data-tab="docs">
          <div class="icon">ğŸ“</div>
          <div class="title">Documents</div>
          <div class="subtitle">Dossiers & fichiers</div>
        </button>

        <button class="tile" data-tab="chat">
          <div class="icon">ğŸ’¬</div>
          <div class="title">Messages</div>
          <div class="subtitle">Chat familial</div>
        </button>

        <button class="tile" id="tileMenu">
          <div class="icon">ğŸ</div>
          <div class="title">Menu</div>
          <div class="subtitle">Clic&miam du jour</div>
        </button>
      </div>
    </div>
  </section>

  <!-- TÃ¢ches -->
  <section id="tasks" class="panel" role="tabpanel">
    <h2>TÃ¢ches</h2>
    <form id="taskForm" class="row">
      <input id="taskInput" type="text" placeholder="Ex: Acheter du laitâ€¦" required>
      <select id="taskWho">
        <option value="Tous">Tous</option>
        <option value="Jean">Jean</option>
        <option value="Laura">Laura</option>
      </select>
      <button type="submit">Ajouter</button>
    </form>
    <ul id="taskList" class="list"></ul>
    <div class="row row-end">
      <button id="clearDone" class="ghost">Effacer terminÃ©es</button>
    </div>
  </section>

  <!-- Budget -->
  <section id="budget" class="panel" role="tabpanel">
    <h2>Budget</h2>
    <form id="txForm" class="row">
      <input id="txLabel" type="text" placeholder="LibellÃ© (ex: Courses)" required>
      <input id="txAmount" type="number" step="0.01" placeholder="Montant (â‚¬)" required>
      <select id="txType">
        <option value="-" selected>DÃ©pense</option>
        <option value="+">Revenu</option>
      </select>
      <button type="submit">Ajouter</button>
    </form>
    <div class="cards">
      <div class="card"><div class="muted">Solde</div><div id="balance" class="big">0,00 â‚¬</div></div>
      <div class="card"><div class="muted">DÃ©penses</div><div id="out" class="big">0,00 â‚¬</div></div>
      <div class="card"><div class="muted">Revenus</div><div id="in" class="big">0,00 â‚¬</div></div>
    </div>
    <ul id="txList" class="list"></ul>
  </section>

  <!-- MÃ©tÃ©o -->
  <section id="weather" class="panel" role="tabpanel">
    <h2>MÃ©tÃ©o</h2>
    <div class="wx-now">
      <div class="wx-main">
        <div class="wx-emoji" id="wxEmoji">â›…</div>
        <div>
          <div class="wx-temp" id="wxTemp">--Â°</div>
          <div class="wx-desc" id="wxDesc">--</div>
        </div>
      </div>
      <div class="wx-place" id="wxPlace">Localisationâ€¦</div>
    </div>
    <ul class="list" id="wxDaily"></ul>
  </section>

  <!-- Notes -->
  <section id="notes" class="panel" role="tabpanel">
    <h2>Notes</h2>
    <textarea id="notesArea" rows="12" placeholder="Tes notes iciâ€¦"></textarea>
    <div class="row row-end">
      <span class="muted" id="notesSaved">EnregistrÃ© âœ”ï¸</span>
    </div>
  </section>

  <!-- Calendrier -->
  <section id="calendar" class="panel" role="tabpanel">
    <h2>Calendrier familial</h2>
    <div id="calGrid" class="cal-grid"></div>
    <ul id="eventList" class="list"></ul>
  </section>
  
  <!-- Documents -->
  <section id="docs" class="panel" role="tabpanel">
    <h2>Documents</h2>
    <div id="folderGrid" class="folder-grid"></div>
    <div id="filesArea" class="files-area" style="display:none"></div>
  </section>

  <!-- Messages (chat + fichiers) -->
  <section id="chat" class="panel" role="tabpanel">
    <h2>Chat familial</h2>
    <div id="chatList" class="chat-messages"></div>
  </section>
</main>

<footer class="app-footer">
  <small>App locale -- modifie librement dans Textastic âœ¦</small>
</footer>

<script src="app.js"></script>
<script>
if ('serviceWorker' in navigator) {
  window.addEventListener('load', () => {
    navigator.serviceWorker.register('/sw.js').catch(console.error);
  });
}
</script>
</body>
</html>